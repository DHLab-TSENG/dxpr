<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Usage of dxpr Package â€¢ dxpr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>



<meta property="og:title" content="Usage of dxpr Package" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-title-body">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">dxpr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/DHLab-TSENG/dxpr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Usage of dxpr Package</h1>
    </div>

<div id="usage-of-dxpr-package" class="section level1">

<div id="i--data-integration" class="section level2">
<h2 class="hasAnchor">
<a href="#i--data-integration" class="anchor"></a>I. Data integration</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">head</span>(sampleDxFile)  </a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co">#&gt;     ID  ICD       Date</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co">#&gt; 1:  A2 Z992 2020-05-22</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#&gt; 2:  A5 Z992 2020-01-24</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#&gt; 3:  A8 Z992 2015-10-27</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt; 4: A13 Z992 2020-04-26</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt; 5: A13 Z992 2025-02-02</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt; 6: A15 Z992 2023-05-12</span></a></code></pre></div>
<div id="data-standardization" class="section level3">
<h3 class="hasAnchor">
<a href="#data-standardization" class="anchor"></a>1. Data standardization</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># ICD to uniform short format</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">ICD_Short &lt;-<span class="st"> </span><span class="kw">icdDxDecimalToShort</span>(<span class="dt">dxDataFile =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">                                 <span class="dt">icdColName =</span> ICD,</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">                                 <span class="dt">dateColName =</span> Date, </a>
<a class="sourceLine" id="cb2-5" data-line-number="5">                                 <span class="dt">icd10usingDate =</span> <span class="st">"2015/10/01"</span>)</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; Wrong ICD format: total 9 ICD codes (the number of occurrences is in brackets)</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; c("A0.11 (20)", "E114 (8)", "Z9.90 (6)", "F42 (6)", "001 (5)", "75.52 (4)", "755.2 (3)", "123.45 (3)", "7552 (2)")</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt;  </span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; Wrong ICD version: total 7 ICD codes (the number of occurrences is in brackets)</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; c("V27.0 (18)", "A01.05 (8)", "42761 (7)", "V24.1 (6)", "A0105 (5)", "E03.0 (4)", "650 (4)")</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt;  </span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt; Warning: The ICD mentioned above matches to "NA" due to the format or other</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; issues.</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; Warning: "Wrong ICD format" means the ICD has wrong format</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; Warning: "Wrong ICD version" means the ICD classify to wrong ICD version</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt; (cause the "icd10usingDate" or other issues)</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="kw">head</span>(ICD_Short<span class="op">$</span>ICD)</a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt;     ICD</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt; 1: Z992</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt; 2: Z992</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; 3: Z992</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt; 4: Z992</span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co">#&gt; 5: Z992</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="co">#&gt; 6: Z992</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="kw">tail</span>(ICD_Short<span class="op">$</span>Error)</a>
<a class="sourceLine" id="cb2-28" data-line-number="28"><span class="co">#&gt;       ICD count IcdVersionInFile     WrongType Suggestion</span></a>
<a class="sourceLine" id="cb2-29" data-line-number="29"><span class="co">#&gt; 1:  75.52     4            ICD 9  Wrong format           </span></a>
<a class="sourceLine" id="cb2-30" data-line-number="30"><span class="co">#&gt; 2:  E03.0     4            ICD 9 Wrong version           </span></a>
<a class="sourceLine" id="cb2-31" data-line-number="31"><span class="co">#&gt; 3:    650     4           ICD 10 Wrong version           </span></a>
<a class="sourceLine" id="cb2-32" data-line-number="32"><span class="co">#&gt; 4: 123.45     3           ICD 10  Wrong format           </span></a>
<a class="sourceLine" id="cb2-33" data-line-number="33"><span class="co">#&gt; 5:  755.2     3            ICD 9  Wrong format     755.29</span></a>
<a class="sourceLine" id="cb2-34" data-line-number="34"><span class="co">#&gt; 6:   7552     2            ICD 9  Wrong format      75529</span></a>
<a class="sourceLine" id="cb2-35" data-line-number="35"></a>
<a class="sourceLine" id="cb2-36" data-line-number="36">sampleDxFile<span class="op">$</span>Decimal &lt;-<span class="st"> </span>ICD_Short<span class="op">$</span>ICD </a>
<a class="sourceLine" id="cb2-37" data-line-number="37"></a>
<a class="sourceLine" id="cb2-38" data-line-number="38"><span class="kw">head</span>(sampleDxFile)</a>
<a class="sourceLine" id="cb2-39" data-line-number="39"><span class="co">#&gt;     ID  ICD       Date Decimal</span></a>
<a class="sourceLine" id="cb2-40" data-line-number="40"><span class="co">#&gt; 1:  A2 Z992 2020-05-22    Z992</span></a>
<a class="sourceLine" id="cb2-41" data-line-number="41"><span class="co">#&gt; 2:  A5 Z992 2020-01-24    Z992</span></a>
<a class="sourceLine" id="cb2-42" data-line-number="42"><span class="co">#&gt; 3:  A8 Z992 2015-10-27    Z992</span></a>
<a class="sourceLine" id="cb2-43" data-line-number="43"><span class="co">#&gt; 4: A13 Z992 2020-04-26    Z992</span></a>
<a class="sourceLine" id="cb2-44" data-line-number="44"><span class="co">#&gt; 5: A13 Z992 2025-02-02    Z992</span></a>
<a class="sourceLine" id="cb2-45" data-line-number="45"><span class="co">#&gt; 6: A15 Z992 2023-05-12    Z992</span></a></code></pre></div>
</div>
<div id="data-grouping" class="section level3">
<h3 class="hasAnchor">
<a href="#data-grouping" class="anchor"></a>2. Data grouping</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># ICD to level 2 CCS description of multiple-level CCS</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">CCSlvl_description &lt;-<span class="st"> </span><span class="kw">icdDxToCCSLvl</span>(<span class="dt">dxDataFile =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">                                    <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">                                    <span class="dt">icdColName =</span> ICD,</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">                                    <span class="dt">dateColName =</span> Date, </a>
<a class="sourceLine" id="cb3-6" data-line-number="6">                                    <span class="dt">icd10usingDate =</span> <span class="st">"2015-10-01"</span>, </a>
<a class="sourceLine" id="cb3-7" data-line-number="7">                                    <span class="dt">CCSLevel =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">                                    <span class="dt">isDescription =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-9" data-line-number="9"></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="kw">head</span>(<span class="kw">setorder</span>(CCSlvl_description<span class="op">$</span>groupedDT, <span class="st">"ID"</span>))</a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;    Short ID   ICD       Date                CCS_LVL_2_LABEL</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt; 1:  5855 A0  5855 2013-12-20 Diseases of the urinary system</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt; 2: V4511 A0 V4511 2012-04-05 Diseases of the urinary system</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt; 3:  V560 A0  V560 2010-03-28 Diseases of the urinary system</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt; 4:  5853 A0  5853 2010-10-29 Diseases of the urinary system</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt; 5:  5856 A0  5856 2009-07-25 Diseases of the urinary system</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; 6:   001 A0   001 2014-11-05                           &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="kw">head</span>(CCSlvl_description<span class="op">$</span>summarised_groupedDT)</a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt;     ID                CCS_LVL_2_LABEL firstCaseDate endCaseDate count</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt; 1:  A0 Diseases of the urinary system    2009-07-25  2013-12-20     5</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt; 2:  A1 Diseases of the urinary system    2006-11-29  2014-09-24     5</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt; 3: A10 Diseases of the urinary system    2007-11-04  2012-07-30     5</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt; 4: A11 Diseases of the urinary system    2008-03-09  2011-09-03     5</span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt; 5: A12 Diseases of the urinary system    2006-05-14  2015-06-29     5</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt; 6: A13 Diseases of the urinary system    2006-04-29  2025-02-02     5</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt;       period</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt; 1: 1609 days</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt; 2: 2856 days</span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt; 3: 1730 days</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt; 4: 1273 days</span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt; 5: 3333 days</span></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="co">#&gt; 6: 6854 days</span></a>
<a class="sourceLine" id="cb3-34" data-line-number="34"></a>
<a class="sourceLine" id="cb3-35" data-line-number="35"><span class="co">## ICD to pheWAS</span></a>
<a class="sourceLine" id="cb3-36" data-line-number="36">pheWAS &lt;-<span class="st"> </span><span class="kw">icdDxToPheWAS</span>(<span class="dt">dxDataFile  =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb3-37" data-line-number="37">                        <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb3-38" data-line-number="38">                        <span class="dt">icdColName =</span> ICD,</a>
<a class="sourceLine" id="cb3-39" data-line-number="39">                        <span class="dt">dateColName =</span> Date, </a>
<a class="sourceLine" id="cb3-40" data-line-number="40">                        <span class="dt">icd10usingDate =</span> <span class="st">"2015-10-01"</span>, </a>
<a class="sourceLine" id="cb3-41" data-line-number="41">                        <span class="dt">isDescription =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb3-42" data-line-number="42"></a>
<a class="sourceLine" id="cb3-43" data-line-number="43"><span class="kw">head</span>(<span class="kw">setorder</span>(pheWAS<span class="op">$</span>groupedDT, <span class="st">"ID"</span>))</a>
<a class="sourceLine" id="cb3-44" data-line-number="44"><span class="co">#&gt;    Decimal ID   ICD       Date PheCode</span></a>
<a class="sourceLine" id="cb3-45" data-line-number="45"><span class="co">#&gt; 1:   585.5 A0  5855 2013-12-20  585.32</span></a>
<a class="sourceLine" id="cb3-46" data-line-number="46"><span class="co">#&gt; 2:  V45.11 A0 V4511 2012-04-05  585.31</span></a>
<a class="sourceLine" id="cb3-47" data-line-number="47"><span class="co">#&gt; 3:   V56.0 A0  V560 2010-03-28  585.31</span></a>
<a class="sourceLine" id="cb3-48" data-line-number="48"><span class="co">#&gt; 4:   585.3 A0  5853 2010-10-29  585.33</span></a>
<a class="sourceLine" id="cb3-49" data-line-number="49"><span class="co">#&gt; 5:   585.6 A0  5856 2009-07-25  585.32</span></a>
<a class="sourceLine" id="cb3-50" data-line-number="50"><span class="co">#&gt; 6:     001 A0   001 2014-11-05     008</span></a>
<a class="sourceLine" id="cb3-51" data-line-number="51"></a>
<a class="sourceLine" id="cb3-52" data-line-number="52"><span class="kw">head</span>(<span class="kw">setorder</span>(pheWAS<span class="op">$</span>summarised_groupedDT, <span class="st">"ID"</span>))</a>
<a class="sourceLine" id="cb3-53" data-line-number="53"><span class="co">#&gt;    ID PheCode firstCaseDate endCaseDate count    period</span></a>
<a class="sourceLine" id="cb3-54" data-line-number="54"><span class="co">#&gt; 1: A0  585.32    2009-07-25  2013-12-20     2 1609 days</span></a>
<a class="sourceLine" id="cb3-55" data-line-number="55"><span class="co">#&gt; 2: A0  585.31    2010-03-28  2012-04-05     2  739 days</span></a>
<a class="sourceLine" id="cb3-56" data-line-number="56"><span class="co">#&gt; 3: A0  585.33    2010-10-29  2010-10-29     1    0 days</span></a>
<a class="sourceLine" id="cb3-57" data-line-number="57"><span class="co">#&gt; 4: A0     008    2014-11-05  2014-11-05     1    0 days</span></a>
<a class="sourceLine" id="cb3-58" data-line-number="58"><span class="co">#&gt; 5: A1  585.32    2006-11-29  2013-04-28     3 2342 days</span></a>
<a class="sourceLine" id="cb3-59" data-line-number="59"><span class="co">#&gt; 6: A1  585.33    2014-09-24  2014-09-24     1    0 days</span></a>
<a class="sourceLine" id="cb3-60" data-line-number="60"></a>
<a class="sourceLine" id="cb3-61" data-line-number="61"><span class="co"># ICD to Comorbidity: Elixhauser</span></a>
<a class="sourceLine" id="cb3-62" data-line-number="62">ELIX &lt;-<span class="st"> </span><span class="kw">icdDxToComorbid</span>(<span class="dt">dxDataFile  =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb3-63" data-line-number="63">                        <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb3-64" data-line-number="64">                        <span class="dt">icdColName =</span> ICD,</a>
<a class="sourceLine" id="cb3-65" data-line-number="65">                        <span class="dt">dateColName =</span> Date, </a>
<a class="sourceLine" id="cb3-66" data-line-number="66">                        <span class="dt">icd10usingDate =</span> <span class="st">"2015-10-01"</span>, </a>
<a class="sourceLine" id="cb3-67" data-line-number="67">                        <span class="dt">comorbidMethod =</span> ELIX)</a>
<a class="sourceLine" id="cb3-68" data-line-number="68"></a>
<a class="sourceLine" id="cb3-69" data-line-number="69"><span class="kw">head</span>(<span class="kw">setorder</span>(ELIX<span class="op">$</span>groupedDT, <span class="st">"ID"</span>))</a>
<a class="sourceLine" id="cb3-70" data-line-number="70"><span class="co">#&gt;    Short ID   ICD       Date Comorbidity</span></a>
<a class="sourceLine" id="cb3-71" data-line-number="71"><span class="co">#&gt; 1:  5855 A0  5855 2013-12-20    RENLFAIL</span></a>
<a class="sourceLine" id="cb3-72" data-line-number="72"><span class="co">#&gt; 2: V4511 A0 V4511 2012-04-05    RENLFAIL</span></a>
<a class="sourceLine" id="cb3-73" data-line-number="73"><span class="co">#&gt; 3:  V560 A0  V560 2010-03-28    RENLFAIL</span></a>
<a class="sourceLine" id="cb3-74" data-line-number="74"><span class="co">#&gt; 4:  5853 A0  5853 2010-10-29    RENLFAIL</span></a>
<a class="sourceLine" id="cb3-75" data-line-number="75"><span class="co">#&gt; 5:  5856 A0  5856 2009-07-25    RENLFAIL</span></a>
<a class="sourceLine" id="cb3-76" data-line-number="76"><span class="co">#&gt; 6:   001 A0   001 2014-11-05        &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb3-77" data-line-number="77"></a>
<a class="sourceLine" id="cb3-78" data-line-number="78"><span class="kw">head</span>(ELIX<span class="op">$</span>summarised_groupedDT)</a>
<a class="sourceLine" id="cb3-79" data-line-number="79"><span class="co">#&gt;     ID Comorbidity firstCaseDate endCaseDate count    period</span></a>
<a class="sourceLine" id="cb3-80" data-line-number="80"><span class="co">#&gt; 1:  A0    RENLFAIL    2009-07-25  2013-12-20     5 1609 days</span></a>
<a class="sourceLine" id="cb3-81" data-line-number="81"><span class="co">#&gt; 2:  A1    RENLFAIL    2006-11-29  2014-09-24     5 2856 days</span></a>
<a class="sourceLine" id="cb3-82" data-line-number="82"><span class="co">#&gt; 3: A10    RENLFAIL    2007-11-04  2012-07-30     5 1730 days</span></a>
<a class="sourceLine" id="cb3-83" data-line-number="83"><span class="co">#&gt; 4: A11    RENLFAIL    2008-03-09  2011-09-03     5 1273 days</span></a>
<a class="sourceLine" id="cb3-84" data-line-number="84"><span class="co">#&gt; 5: A12    RENLFAIL    2006-05-14  2015-06-29     5 3333 days</span></a>
<a class="sourceLine" id="cb3-85" data-line-number="85"><span class="co">#&gt; 6: A13    RENLFAIL    2006-04-29  2025-02-02     5 6854 days</span></a>
<a class="sourceLine" id="cb3-86" data-line-number="86"></a>
<a class="sourceLine" id="cb3-87" data-line-number="87"><span class="co"># ICD to Comorbidity: AHRQ</span></a>
<a class="sourceLine" id="cb3-88" data-line-number="88">AHRQ &lt;-<span class="st"> </span><span class="kw">icdDxToComorbid</span>(<span class="dt">dxDataFile  =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb3-89" data-line-number="89">                        <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb3-90" data-line-number="90">                        <span class="dt">icdColName =</span> ICD,</a>
<a class="sourceLine" id="cb3-91" data-line-number="91">                        <span class="dt">dateColName =</span> Date, </a>
<a class="sourceLine" id="cb3-92" data-line-number="92">                        <span class="dt">icd10usingDate =</span> <span class="st">"2015-10-01"</span>, </a>
<a class="sourceLine" id="cb3-93" data-line-number="93">                        <span class="dt">comorbidMethod =</span> ahrq)</a>
<a class="sourceLine" id="cb3-94" data-line-number="94"></a>
<a class="sourceLine" id="cb3-95" data-line-number="95"><span class="kw">head</span>(<span class="kw">setorder</span>(AHRQ<span class="op">$</span>groupedDT, <span class="st">"ID"</span>))</a>
<a class="sourceLine" id="cb3-96" data-line-number="96"><span class="co">#&gt;    Short ID   ICD       Date Comorbidity</span></a>
<a class="sourceLine" id="cb3-97" data-line-number="97"><span class="co">#&gt; 1:  5855 A0  5855 2013-12-20       Renal</span></a>
<a class="sourceLine" id="cb3-98" data-line-number="98"><span class="co">#&gt; 2: V4511 A0 V4511 2012-04-05       Renal</span></a>
<a class="sourceLine" id="cb3-99" data-line-number="99"><span class="co">#&gt; 3:  V560 A0  V560 2010-03-28       Renal</span></a>
<a class="sourceLine" id="cb3-100" data-line-number="100"><span class="co">#&gt; 4:  5853 A0  5853 2010-10-29       Renal</span></a>
<a class="sourceLine" id="cb3-101" data-line-number="101"><span class="co">#&gt; 5:  5856 A0  5856 2009-07-25       Renal</span></a>
<a class="sourceLine" id="cb3-102" data-line-number="102"><span class="co">#&gt; 6:   001 A0   001 2014-11-05        &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb3-103" data-line-number="103"></a>
<a class="sourceLine" id="cb3-104" data-line-number="104"><span class="kw">head</span>(AHRQ<span class="op">$</span>summarised_groupedDT)</a>
<a class="sourceLine" id="cb3-105" data-line-number="105"><span class="co">#&gt;     ID Comorbidity firstCaseDate endCaseDate count    period</span></a>
<a class="sourceLine" id="cb3-106" data-line-number="106"><span class="co">#&gt; 1:  A0       Renal    2009-07-25  2013-12-20     5 1609 days</span></a>
<a class="sourceLine" id="cb3-107" data-line-number="107"><span class="co">#&gt; 2:  A1       Renal    2006-11-29  2014-09-24     5 2856 days</span></a>
<a class="sourceLine" id="cb3-108" data-line-number="108"><span class="co">#&gt; 3: A10       Renal    2007-11-04  2012-07-30     5 1730 days</span></a>
<a class="sourceLine" id="cb3-109" data-line-number="109"><span class="co">#&gt; 4: A11       Renal    2008-03-09  2011-09-03     5 1273 days</span></a>
<a class="sourceLine" id="cb3-110" data-line-number="110"><span class="co">#&gt; 5: A12       Renal    2006-05-14  2015-06-29     5 3333 days</span></a>
<a class="sourceLine" id="cb3-111" data-line-number="111"><span class="co">#&gt; 6: A13       Renal    2006-04-29  2025-02-02     5 6854 days</span></a>
<a class="sourceLine" id="cb3-112" data-line-number="112"></a>
<a class="sourceLine" id="cb3-113" data-line-number="113"><span class="co"># ICD to Comorbidity: Charlson</span></a>
<a class="sourceLine" id="cb3-114" data-line-number="114">Charlson &lt;-<span class="st"> </span><span class="kw">icdDxToComorbid</span>(<span class="dt">dxDataFile  =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb3-115" data-line-number="115">                        <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb3-116" data-line-number="116">                        <span class="dt">icdColName =</span> ICD,</a>
<a class="sourceLine" id="cb3-117" data-line-number="117">                        <span class="dt">dateColName =</span> Date, </a>
<a class="sourceLine" id="cb3-118" data-line-number="118">                        <span class="dt">icd10usingDate =</span> <span class="st">"2015-10-01"</span>, </a>
<a class="sourceLine" id="cb3-119" data-line-number="119">                        <span class="dt">comorbidMethod =</span> Charlson)</a>
<a class="sourceLine" id="cb3-120" data-line-number="120"></a>
<a class="sourceLine" id="cb3-121" data-line-number="121"><span class="kw">head</span>(<span class="kw">setorder</span>(Charlson<span class="op">$</span>groupedDT, <span class="st">"ID"</span>))</a>
<a class="sourceLine" id="cb3-122" data-line-number="122"><span class="co">#&gt;    Short ID   ICD       Date Comorbidity</span></a>
<a class="sourceLine" id="cb3-123" data-line-number="123"><span class="co">#&gt; 1:  5855 A0  5855 2013-12-20          RD</span></a>
<a class="sourceLine" id="cb3-124" data-line-number="124"><span class="co">#&gt; 2: V4511 A0 V4511 2012-04-05          RD</span></a>
<a class="sourceLine" id="cb3-125" data-line-number="125"><span class="co">#&gt; 3:  V560 A0  V560 2010-03-28          RD</span></a>
<a class="sourceLine" id="cb3-126" data-line-number="126"><span class="co">#&gt; 4:  5853 A0  5853 2010-10-29          RD</span></a>
<a class="sourceLine" id="cb3-127" data-line-number="127"><span class="co">#&gt; 5:  5856 A0  5856 2009-07-25          RD</span></a>
<a class="sourceLine" id="cb3-128" data-line-number="128"><span class="co">#&gt; 6:   001 A0   001 2014-11-05        &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb3-129" data-line-number="129"></a>
<a class="sourceLine" id="cb3-130" data-line-number="130"><span class="kw">head</span>(Charlson<span class="op">$</span>summarised_groupedDT)</a>
<a class="sourceLine" id="cb3-131" data-line-number="131"><span class="co">#&gt;     ID Comorbidity firstCaseDate endCaseDate count    period</span></a>
<a class="sourceLine" id="cb3-132" data-line-number="132"><span class="co">#&gt; 1:  A0          RD    2009-07-25  2013-12-20     5 1609 days</span></a>
<a class="sourceLine" id="cb3-133" data-line-number="133"><span class="co">#&gt; 2:  A1          RD    2006-11-29  2014-09-24     5 2856 days</span></a>
<a class="sourceLine" id="cb3-134" data-line-number="134"><span class="co">#&gt; 3: A10          RD    2007-11-04  2012-07-30     5 1730 days</span></a>
<a class="sourceLine" id="cb3-135" data-line-number="135"><span class="co">#&gt; 4: A11          RD    2008-03-09  2011-09-03     5 1273 days</span></a>
<a class="sourceLine" id="cb3-136" data-line-number="136"><span class="co">#&gt; 5: A11      DIAB_C    2015-12-16  2015-12-16     1    0 days</span></a>
<a class="sourceLine" id="cb3-137" data-line-number="137"><span class="co">#&gt; 6: A12          RD    2006-05-14  2015-06-29     5 3333 days</span></a>
<a class="sourceLine" id="cb3-138" data-line-number="138"></a>
<a class="sourceLine" id="cb3-139" data-line-number="139"><span class="co"># ICD to self-defined grouping method: precise matching</span></a>
<a class="sourceLine" id="cb3-140" data-line-number="140">groupingTable &lt;-<span class="st"> </span><span class="kw">data.table</span>(<span class="dt">Group =</span> <span class="kw">rep</span>(<span class="st">"Chronic kidney disease"</span>,<span class="dv">6</span>),</a>
<a class="sourceLine" id="cb3-141" data-line-number="141">                            <span class="dt">ICD =</span> <span class="kw">c</span>(<span class="st">"N181"</span>,<span class="st">"5853"</span>,<span class="st">"5854"</span>,<span class="st">"5855"</span>,<span class="st">"5856"</span>,<span class="st">"5859"</span>))</a>
<a class="sourceLine" id="cb3-142" data-line-number="142"></a>
<a class="sourceLine" id="cb3-143" data-line-number="143">groupingTable</a>
<a class="sourceLine" id="cb3-144" data-line-number="144"><span class="co">#&gt;                     Group  ICD</span></a>
<a class="sourceLine" id="cb3-145" data-line-number="145"><span class="co">#&gt; 1: Chronic kidney disease N181</span></a>
<a class="sourceLine" id="cb3-146" data-line-number="146"><span class="co">#&gt; 2: Chronic kidney disease 5853</span></a>
<a class="sourceLine" id="cb3-147" data-line-number="147"><span class="co">#&gt; 3: Chronic kidney disease 5854</span></a>
<a class="sourceLine" id="cb3-148" data-line-number="148"><span class="co">#&gt; 4: Chronic kidney disease 5855</span></a>
<a class="sourceLine" id="cb3-149" data-line-number="149"><span class="co">#&gt; 5: Chronic kidney disease 5856</span></a>
<a class="sourceLine" id="cb3-150" data-line-number="150"><span class="co">#&gt; 6: Chronic kidney disease 5859</span></a>
<a class="sourceLine" id="cb3-151" data-line-number="151"></a>
<a class="sourceLine" id="cb3-152" data-line-number="152">CustomGroup &lt;-<span class="st"> </span><span class="kw">icdDxToCustom</span>(<span class="dt">dxDataFile  =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb3-153" data-line-number="153">                             <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb3-154" data-line-number="154">                             <span class="dt">icdColName =</span> ICD, </a>
<a class="sourceLine" id="cb3-155" data-line-number="155">                             <span class="dt">dateColName =</span> Date, </a>
<a class="sourceLine" id="cb3-156" data-line-number="156">                             <span class="dt">customGroupingTable =</span> groupingTable)</a>
<a class="sourceLine" id="cb3-157" data-line-number="157"></a>
<a class="sourceLine" id="cb3-158" data-line-number="158"><span class="kw">head</span>(<span class="kw">setorder</span>(CustomGroup<span class="op">$</span>groupedDT, <span class="st">"ID"</span>))</a>
<a class="sourceLine" id="cb3-159" data-line-number="159"><span class="co">#&gt;      ICD ID       Date                  Group</span></a>
<a class="sourceLine" id="cb3-160" data-line-number="160"><span class="co">#&gt; 1:  5855 A0 2013-12-20 Chronic kidney disease</span></a>
<a class="sourceLine" id="cb3-161" data-line-number="161"><span class="co">#&gt; 2: V4511 A0 2012-04-05                   &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb3-162" data-line-number="162"><span class="co">#&gt; 3:  V560 A0 2010-03-28                   &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb3-163" data-line-number="163"><span class="co">#&gt; 4:  5853 A0 2010-10-29 Chronic kidney disease</span></a>
<a class="sourceLine" id="cb3-164" data-line-number="164"><span class="co">#&gt; 5:  5856 A0 2009-07-25 Chronic kidney disease</span></a>
<a class="sourceLine" id="cb3-165" data-line-number="165"><span class="co">#&gt; 6:   001 A0 2014-11-05                   &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb3-166" data-line-number="166"></a>
<a class="sourceLine" id="cb3-167" data-line-number="167"><span class="kw">head</span>(CustomGroup<span class="op">$</span>summarised_groupedDT)</a>
<a class="sourceLine" id="cb3-168" data-line-number="168"><span class="co">#&gt;     ID                  Group firstCaseDate endCaseDate count    period</span></a>
<a class="sourceLine" id="cb3-169" data-line-number="169"><span class="co">#&gt; 1:  A0 Chronic kidney disease    2009-07-25  2013-12-20     3 1609 days</span></a>
<a class="sourceLine" id="cb3-170" data-line-number="170"><span class="co">#&gt; 2:  A1 Chronic kidney disease    2006-11-29  2014-09-24     4 2856 days</span></a>
<a class="sourceLine" id="cb3-171" data-line-number="171"><span class="co">#&gt; 3: A10 Chronic kidney disease    2007-11-04  2007-11-04     1    0 days</span></a>
<a class="sourceLine" id="cb3-172" data-line-number="172"><span class="co">#&gt; 4: A11 Chronic kidney disease    2008-03-09  2010-02-21     2  714 days</span></a>
<a class="sourceLine" id="cb3-173" data-line-number="173"><span class="co">#&gt; 5: A12 Chronic kidney disease    2006-05-14  2011-02-25     3 1748 days</span></a>
<a class="sourceLine" id="cb3-174" data-line-number="174"><span class="co">#&gt; 6: A13 Chronic kidney disease    2006-04-29  2010-02-21     2 1394 days</span></a>
<a class="sourceLine" id="cb3-175" data-line-number="175"></a>
<a class="sourceLine" id="cb3-176" data-line-number="176"><span class="co"># ICD to self-defined grouping method: fuzzy matching</span></a>
<a class="sourceLine" id="cb3-177" data-line-number="177">grepTable &lt;-<span class="st"> </span><span class="kw">data.table</span>(<span class="dt">Group =</span> <span class="st">"Chronic kidney disease"</span>,</a>
<a class="sourceLine" id="cb3-178" data-line-number="178">                          <span class="dt">grepIcd =</span> <span class="st">"^585|^N18"</span>)</a>
<a class="sourceLine" id="cb3-179" data-line-number="179"></a>
<a class="sourceLine" id="cb3-180" data-line-number="180">grepTable</a>
<a class="sourceLine" id="cb3-181" data-line-number="181"><span class="co">#&gt;                     Group   grepIcd</span></a>
<a class="sourceLine" id="cb3-182" data-line-number="182"><span class="co">#&gt; 1: Chronic kidney disease ^585|^N18</span></a>
<a class="sourceLine" id="cb3-183" data-line-number="183"></a>
<a class="sourceLine" id="cb3-184" data-line-number="184">CustomGrepGroup &lt;-<span class="st"> </span><span class="kw">icdDxToCustomGrep</span>(<span class="dt">dxDataFile  =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb3-185" data-line-number="185">                                     <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb3-186" data-line-number="186">                                     <span class="dt">icdColName =</span> ICD, </a>
<a class="sourceLine" id="cb3-187" data-line-number="187">                                     <span class="dt">dateColName =</span> Date, </a>
<a class="sourceLine" id="cb3-188" data-line-number="188">                                     <span class="dt">customGroupingTable =</span> grepTable)</a>
<a class="sourceLine" id="cb3-189" data-line-number="189"></a>
<a class="sourceLine" id="cb3-190" data-line-number="190"><span class="kw">head</span>(<span class="kw">setorder</span>(CustomGrepGroup<span class="op">$</span>groupedDT, <span class="st">"ID"</span>))</a>
<a class="sourceLine" id="cb3-191" data-line-number="191"><span class="co">#&gt;    ID   ICD       Date            GrepedGroup</span></a>
<a class="sourceLine" id="cb3-192" data-line-number="192"><span class="co">#&gt; 1: A0  5855 2013-12-20 Chronic kidney disease</span></a>
<a class="sourceLine" id="cb3-193" data-line-number="193"><span class="co">#&gt; 2: A0 V4511 2012-04-05                   &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb3-194" data-line-number="194"><span class="co">#&gt; 3: A0  V560 2010-03-28                   &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb3-195" data-line-number="195"><span class="co">#&gt; 4: A0  5853 2010-10-29 Chronic kidney disease</span></a>
<a class="sourceLine" id="cb3-196" data-line-number="196"><span class="co">#&gt; 5: A0  5856 2009-07-25 Chronic kidney disease</span></a>
<a class="sourceLine" id="cb3-197" data-line-number="197"><span class="co">#&gt; 6: A0   001 2014-11-05                   &lt;NA&gt;</span></a></code></pre></div>
</div>
</div>
<div id="ii--data-wrangling" class="section level2">
<h2 class="hasAnchor">
<a href="#ii--data-wrangling" class="anchor"></a>II. Data wrangling</h2>
<div id="case-selection" class="section level3">
<h3 class="hasAnchor">
<a href="#case-selection" class="anchor"></a>1. Case selection</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Select cases by ICD condition "^585"</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">Case &lt;-<span class="st"> </span><span class="kw">selectCases</span>(<span class="dt">dxDataFile =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">                    <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">                    <span class="dt">icdColName =</span> ICD, </a>
<a class="sourceLine" id="cb4-5" data-line-number="5">                    <span class="dt">dateColName =</span> Date, </a>
<a class="sourceLine" id="cb4-6" data-line-number="6">                    <span class="dt">icd10usingDate =</span> <span class="st">"2015/10/01"</span>,</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">                    <span class="dt">groupDataType =</span> icd,</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">                    <span class="dt">caseCondition =</span> <span class="st">"^585"</span>,</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">                    <span class="dt">caseCount =</span> <span class="dv">2</span>,  </a>
<a class="sourceLine" id="cb4-10" data-line-number="10">                    <span class="dt">periodRange =</span> <span class="kw">c</span>(<span class="dv">30</span>, <span class="dv">365</span>))</a>
<a class="sourceLine" id="cb4-11" data-line-number="11"></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="kw">head</span>(Case)</a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt;     ID selectedCase count firstCaseDate endCaseDate    period</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt; 1:  A1     Selected     4    2006-11-29  2014-09-24 2856 days</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt; 2: A12    Selected*     3    2006-05-14  2011-02-25 1748 days</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; 3: A13    Selected*     2    2006-04-29  2010-02-21 1394 days</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt; 4: A18    Selected*     2    2007-04-05  2012-02-10 1772 days</span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt; 5:  A2    Selected*     3    2011-09-20  2015-01-06 1204 days</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt; 6:  A0    Selected*     3    2009-07-25  2013-12-20 1609 days</span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="co">#&gt;    MostCommonICD MostCommonICDCount</span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="co">#&gt; 1:          5855                  2</span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="co">#&gt; 2:          5859                  2</span></a>
<a class="sourceLine" id="cb4-23" data-line-number="23"><span class="co">#&gt; 3:          5855                  2</span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24"><span class="co">#&gt; 4:          5855                  2</span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25"><span class="co">#&gt; 5:          5855                  2</span></a>
<a class="sourceLine" id="cb4-26" data-line-number="26"><span class="co">#&gt; 6:          5856                  1</span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27"></a>
<a class="sourceLine" id="cb4-28" data-line-number="28"><span class="kw">tail</span>(Case)</a>
<a class="sourceLine" id="cb4-29" data-line-number="29"><span class="co">#&gt;    ID selectedCase count firstCaseDate endCaseDate  period MostCommonICD</span></a>
<a class="sourceLine" id="cb4-30" data-line-number="30"><span class="co">#&gt; 1: D3 non-Selected    NA          &lt;NA&gt;        &lt;NA&gt; NA days          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-31" data-line-number="31"><span class="co">#&gt; 2: D4 non-Selected    NA          &lt;NA&gt;        &lt;NA&gt; NA days          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-32" data-line-number="32"><span class="co">#&gt; 3: D5 non-Selected    NA          &lt;NA&gt;        &lt;NA&gt; NA days          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-33" data-line-number="33"><span class="co">#&gt; 4: D6 non-Selected    NA          &lt;NA&gt;        &lt;NA&gt; NA days          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-34" data-line-number="34"><span class="co">#&gt; 5: D7 non-Selected    NA          &lt;NA&gt;        &lt;NA&gt; NA days          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-35" data-line-number="35"><span class="co">#&gt; 6: D8 non-Selected    NA          &lt;NA&gt;        &lt;NA&gt; NA days          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-36" data-line-number="36"><span class="co">#&gt;    MostCommonICDCount</span></a>
<a class="sourceLine" id="cb4-37" data-line-number="37"><span class="co">#&gt; 1:                 NA</span></a>
<a class="sourceLine" id="cb4-38" data-line-number="38"><span class="co">#&gt; 2:                 NA</span></a>
<a class="sourceLine" id="cb4-39" data-line-number="39"><span class="co">#&gt; 3:                 NA</span></a>
<a class="sourceLine" id="cb4-40" data-line-number="40"><span class="co">#&gt; 4:                 NA</span></a>
<a class="sourceLine" id="cb4-41" data-line-number="41"><span class="co">#&gt; 5:                 NA</span></a>
<a class="sourceLine" id="cb4-42" data-line-number="42"><span class="co">#&gt; 6:                 NA</span></a>
<a class="sourceLine" id="cb4-43" data-line-number="43"></a>
<a class="sourceLine" id="cb4-44" data-line-number="44"><span class="co"># Select cases by AHRQ comorbidity condition  "Renal"</span></a>
<a class="sourceLine" id="cb4-45" data-line-number="45">Case &lt;-<span class="st"> </span><span class="kw">selectCases</span>(<span class="dt">dxDataFile =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb4-46" data-line-number="46">                    <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb4-47" data-line-number="47">                    <span class="dt">icdColName =</span> ICD, </a>
<a class="sourceLine" id="cb4-48" data-line-number="48">                    <span class="dt">dateColName =</span> Date, </a>
<a class="sourceLine" id="cb4-49" data-line-number="49">                    <span class="dt">icd10usingDate =</span> <span class="st">"2015/10/01"</span>,</a>
<a class="sourceLine" id="cb4-50" data-line-number="50">                    <span class="dt">groupDataType =</span> ahrq,</a>
<a class="sourceLine" id="cb4-51" data-line-number="51">                    <span class="dt">isDescription =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb4-52" data-line-number="52">                    <span class="dt">caseCondition =</span> <span class="st">"Renal"</span>,</a>
<a class="sourceLine" id="cb4-53" data-line-number="53">                    <span class="dt">caseCount =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb4-54" data-line-number="54">                    <span class="dt">periodRange =</span> <span class="kw">c</span>(<span class="dv">30</span>, <span class="dv">365</span>))</a>
<a class="sourceLine" id="cb4-55" data-line-number="55"></a>
<a class="sourceLine" id="cb4-56" data-line-number="56"><span class="kw">head</span>(Case)</a>
<a class="sourceLine" id="cb4-57" data-line-number="57"><span class="co">#&gt;     ID selectedCase count firstCaseDate endCaseDate    period</span></a>
<a class="sourceLine" id="cb4-58" data-line-number="58"><span class="co">#&gt; 1:  A3     Selected     5    2008-07-08  2014-02-24 2057 days</span></a>
<a class="sourceLine" id="cb4-59" data-line-number="59"><span class="co">#&gt; 2:  A1     Selected     5    2006-11-29  2014-09-24 2856 days</span></a>
<a class="sourceLine" id="cb4-60" data-line-number="60"><span class="co">#&gt; 3: A10     Selected     5    2007-11-04  2012-07-30 1730 days</span></a>
<a class="sourceLine" id="cb4-61" data-line-number="61"><span class="co">#&gt; 4: A12     Selected     5    2006-05-14  2015-06-29 3333 days</span></a>
<a class="sourceLine" id="cb4-62" data-line-number="62"><span class="co">#&gt; 5: A13     Selected     5    2006-04-29  2025-02-02 6854 days</span></a>
<a class="sourceLine" id="cb4-63" data-line-number="63"><span class="co">#&gt; 6: A15     Selected     5    2007-05-25  2023-05-12 5831 days</span></a>
<a class="sourceLine" id="cb4-64" data-line-number="64"><span class="co">#&gt;    MostCommonICD MostCommonICDCount</span></a>
<a class="sourceLine" id="cb4-65" data-line-number="65"><span class="co">#&gt; 1:          V420                  3</span></a>
<a class="sourceLine" id="cb4-66" data-line-number="66"><span class="co">#&gt; 2:          5855                  2</span></a>
<a class="sourceLine" id="cb4-67" data-line-number="67"><span class="co">#&gt; 3:         V5631                  2</span></a>
<a class="sourceLine" id="cb4-68" data-line-number="68"><span class="co">#&gt; 4:          5859                  2</span></a>
<a class="sourceLine" id="cb4-69" data-line-number="69"><span class="co">#&gt; 5:          5855                  2</span></a>
<a class="sourceLine" id="cb4-70" data-line-number="70"><span class="co">#&gt; 6:         V5631                  2</span></a>
<a class="sourceLine" id="cb4-71" data-line-number="71"></a>
<a class="sourceLine" id="cb4-72" data-line-number="72"><span class="co"># Select cases by CCS Level 2 condition "Diseases of the urinary system"</span></a>
<a class="sourceLine" id="cb4-73" data-line-number="73">Case &lt;-<span class="st"> </span><span class="kw">selectCases</span>(<span class="dt">dxDataFile =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb4-74" data-line-number="74">                    <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb4-75" data-line-number="75">                    <span class="dt">icdColName =</span> ICD, </a>
<a class="sourceLine" id="cb4-76" data-line-number="76">                    <span class="dt">dateColName =</span> Date, </a>
<a class="sourceLine" id="cb4-77" data-line-number="77">                    <span class="dt">icd10usingDate =</span> <span class="st">"2015/10/01"</span>,</a>
<a class="sourceLine" id="cb4-78" data-line-number="78">                    <span class="dt">groupDataType =</span> ccslvl2,</a>
<a class="sourceLine" id="cb4-79" data-line-number="79">                    <span class="dt">isDescription =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb4-80" data-line-number="80">                    <span class="dt">caseCondition =</span> <span class="st">"Diseases of the urinary system"</span>,</a>
<a class="sourceLine" id="cb4-81" data-line-number="81">                    <span class="dt">caseCount =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb4-82" data-line-number="82">                    <span class="dt">periodRange =</span> <span class="kw">c</span>(<span class="dv">30</span>, <span class="dv">365</span>))</a>
<a class="sourceLine" id="cb4-83" data-line-number="83"></a>
<a class="sourceLine" id="cb4-84" data-line-number="84"><span class="kw">head</span>(Case)</a>
<a class="sourceLine" id="cb4-85" data-line-number="85"><span class="co">#&gt;     ID selectedCase count firstCaseDate endCaseDate    period</span></a>
<a class="sourceLine" id="cb4-86" data-line-number="86"><span class="co">#&gt; 1:  A3     Selected     5    2008-07-08  2014-02-24 2057 days</span></a>
<a class="sourceLine" id="cb4-87" data-line-number="87"><span class="co">#&gt; 2:  A1     Selected     5    2006-11-29  2014-09-24 2856 days</span></a>
<a class="sourceLine" id="cb4-88" data-line-number="88"><span class="co">#&gt; 3: A10     Selected     5    2007-11-04  2012-07-30 1730 days</span></a>
<a class="sourceLine" id="cb4-89" data-line-number="89"><span class="co">#&gt; 4: A12     Selected     5    2006-05-14  2015-06-29 3333 days</span></a>
<a class="sourceLine" id="cb4-90" data-line-number="90"><span class="co">#&gt; 5: A13     Selected     5    2006-04-29  2025-02-02 6854 days</span></a>
<a class="sourceLine" id="cb4-91" data-line-number="91"><span class="co">#&gt; 6: A15     Selected     5    2007-05-25  2023-05-12 5831 days</span></a>
<a class="sourceLine" id="cb4-92" data-line-number="92"><span class="co">#&gt;    MostCommonICD MostCommonICDCount</span></a>
<a class="sourceLine" id="cb4-93" data-line-number="93"><span class="co">#&gt; 1:          V420                  3</span></a>
<a class="sourceLine" id="cb4-94" data-line-number="94"><span class="co">#&gt; 2:          5855                  2</span></a>
<a class="sourceLine" id="cb4-95" data-line-number="95"><span class="co">#&gt; 3:         V5631                  2</span></a>
<a class="sourceLine" id="cb4-96" data-line-number="96"><span class="co">#&gt; 4:          5859                  2</span></a>
<a class="sourceLine" id="cb4-97" data-line-number="97"><span class="co">#&gt; 5:          5855                  2</span></a>
<a class="sourceLine" id="cb4-98" data-line-number="98"><span class="co">#&gt; 6:         V5631                  2</span></a></code></pre></div>
</div>
<div id="condition-era-generation" class="section level3">
<h3 class="hasAnchor">
<a href="#condition-era-generation" class="anchor"></a>2. Condition era generation</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># get era by the comorbidity condition ELIX</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">Era &lt;-<span class="st"> </span><span class="kw">getConditionEra</span>(<span class="dt">dxDataFile =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">                       <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">                       <span class="dt">icdColName =</span> ICD,</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">                       <span class="dt">dateColName =</span> Date,</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">                       <span class="dt">icd10usingDate =</span> <span class="st">"2015/10/01"</span>,</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">                       <span class="dt">groupDataType =</span> ELIX,</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">                       <span class="dt">isDescription =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">                       <span class="dt">gapDate =</span> <span class="dv">30</span>)</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="kw">head</span>(Era)</a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt;    ID   Description era firstCaseDate endCaseDate count period</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; 1: A0 Renal failure   1    2009-07-25  2009-07-25     1 0 days</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; 2: A0 Renal failure   2    2010-03-28  2010-03-28     1 0 days</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; 3: A0 Renal failure   3    2010-10-29  2010-10-29     1 0 days</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; 4: A0 Renal failure   4    2012-04-05  2012-04-05     1 0 days</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt; 5: A0 Renal failure   5    2013-12-20  2013-12-20     1 0 days</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt; 6: A1 Renal failure   1    2006-11-29  2006-11-29     1 0 days</span></a></code></pre></div>
</div>
<div id="analysis-ready-data-generation" class="section level3">
<h3 class="hasAnchor">
<a href="#analysis-ready-data-generation" class="anchor"></a>3. Analysis ready data generation</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># generate analysis ready data mapped with case and Control Group</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">CHARLSON &lt;-<span class="st"> </span><span class="kw">icdDxToComorbid</span>(<span class="dt">dxDataFile =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">                            <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">                            <span class="dt">icdColName =</span> ICD,</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">                            <span class="dt">dateColName =</span> Date,</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">                            <span class="dt">icd10usingDate =</span> <span class="st">"2015-10-01"</span>,</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">                            <span class="dt">comorbidMethod =</span> CHARLSON)</a>
<a class="sourceLine" id="cb6-8" data-line-number="8"></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="kw">head</span>(CHARLSON<span class="op">$</span>groupedDT)</a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt;    Short  ID  ICD       Date Comorbidity</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt; 1:  Z992  A2 Z992 2020-05-22          RD</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt; 2:  Z992  A5 Z992 2020-01-24          RD</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt; 3:  Z992  A8 Z992 2015-10-27          RD</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt; 4:  Z992 A13 Z992 2020-04-26          RD</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt; 5:  Z992 A13 Z992 2025-02-02          RD</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt; 6:  Z992 A15 Z992 2023-05-12          RD</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"></a>
<a class="sourceLine" id="cb6-18" data-line-number="18">selectedCaseFile &lt;-<span class="st"> </span><span class="kw">selectCases</span>(<span class="dt">dxDataFile =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb6-19" data-line-number="19">                                <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb6-20" data-line-number="20">                                <span class="dt">icdColName =</span> ICD,</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">                                <span class="dt">dateColName =</span> Date,</a>
<a class="sourceLine" id="cb6-22" data-line-number="22">                                <span class="dt">icd10usingDate =</span> <span class="st">"2015/10/01"</span>,</a>
<a class="sourceLine" id="cb6-23" data-line-number="23">                                <span class="dt">groupDataType =</span> ccs,</a>
<a class="sourceLine" id="cb6-24" data-line-number="24">                                <span class="dt">caseCondition =</span> <span class="st">"11"</span>,</a>
<a class="sourceLine" id="cb6-25" data-line-number="25">                                <span class="dt">isDescription =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb6-26" data-line-number="26">                                <span class="dt">caseCount =</span> <span class="dv">1</span>)    </a>
<a class="sourceLine" id="cb6-27" data-line-number="27"></a>
<a class="sourceLine" id="cb6-28" data-line-number="28"><span class="kw">head</span>(selectedCaseFile)</a>
<a class="sourceLine" id="cb6-29" data-line-number="29"><span class="co">#&gt;    ID selectedCase count firstCaseDate endCaseDate    period MostCommonICD</span></a>
<a class="sourceLine" id="cb6-30" data-line-number="30"><span class="co">#&gt; 1: C0     Selected     2    2016-07-05  2025-02-21 3153 days          C048</span></a>
<a class="sourceLine" id="cb6-31" data-line-number="31"><span class="co">#&gt; 2: C1     Selected     1    2018-02-13  2018-02-13    0 days          C320</span></a>
<a class="sourceLine" id="cb6-32" data-line-number="32"><span class="co">#&gt; 3: C2     Selected     1    2016-09-09  2016-09-09    0 days          C006</span></a>
<a class="sourceLine" id="cb6-33" data-line-number="33"><span class="co">#&gt; 4: C4     Selected     1    2022-10-23  2022-10-23    0 days          C130</span></a>
<a class="sourceLine" id="cb6-34" data-line-number="34"><span class="co">#&gt; 5: D4     Selected     1    2020-10-06  2020-10-06    0 days        I69942</span></a>
<a class="sourceLine" id="cb6-35" data-line-number="35"><span class="co">#&gt; 6: A2 non-Selected    NA          &lt;NA&gt;        &lt;NA&gt;   NA days          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb6-36" data-line-number="36"><span class="co">#&gt;    MostCommonICDCount</span></a>
<a class="sourceLine" id="cb6-37" data-line-number="37"><span class="co">#&gt; 1:                  1</span></a>
<a class="sourceLine" id="cb6-38" data-line-number="38"><span class="co">#&gt; 2:                  1</span></a>
<a class="sourceLine" id="cb6-39" data-line-number="39"><span class="co">#&gt; 3:                  1</span></a>
<a class="sourceLine" id="cb6-40" data-line-number="40"><span class="co">#&gt; 4:                  1</span></a>
<a class="sourceLine" id="cb6-41" data-line-number="41"><span class="co">#&gt; 5:                  1</span></a>
<a class="sourceLine" id="cb6-42" data-line-number="42"><span class="co">#&gt; 6:                 NA</span></a>
<a class="sourceLine" id="cb6-43" data-line-number="43"></a>
<a class="sourceLine" id="cb6-44" data-line-number="44">groupedDataWide &lt;-<span class="st"> </span><span class="kw">groupedDataLongToWide</span>(<span class="dt">dxDataFile  =</span> CHARLSON<span class="op">$</span>groupedDT,</a>
<a class="sourceLine" id="cb6-45" data-line-number="45">                                         <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb6-46" data-line-number="46">                                         <span class="dt">categoryColName =</span> Comorbidity,</a>
<a class="sourceLine" id="cb6-47" data-line-number="47">                                         <span class="dt">dateColName =</span> Date,</a>
<a class="sourceLine" id="cb6-48" data-line-number="48">                                         <span class="dt">reDup =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb6-49" data-line-number="49">                                         <span class="dt">numericOrBinary =</span> N,</a>
<a class="sourceLine" id="cb6-50" data-line-number="50">                                         <span class="dt">selectedCaseFile =</span> selectedCaseFile)</a>
<a class="sourceLine" id="cb6-51" data-line-number="51"></a>
<a class="sourceLine" id="cb6-52" data-line-number="52"><span class="kw">tail</span>(groupedDataWide) </a>
<a class="sourceLine" id="cb6-53" data-line-number="53"><span class="co">#&gt;    ID CANCER CEVD COPD DIAB_C MSLD PARA PUD PVD RD Rheum selectedCase</span></a>
<a class="sourceLine" id="cb6-54" data-line-number="54"><span class="co">#&gt; 1: D3      0    0    0      0    0    0   0   1  0     0 non-Selected</span></a>
<a class="sourceLine" id="cb6-55" data-line-number="55"><span class="co">#&gt; 2: D4      1    1    0      1    0    0   0   0  0     0     Selected</span></a>
<a class="sourceLine" id="cb6-56" data-line-number="56"><span class="co">#&gt; 3: D5      1    0    1      1    0    0   0   0  0     1 non-Selected</span></a>
<a class="sourceLine" id="cb6-57" data-line-number="57"><span class="co">#&gt; 4: D6      0    0    0      0    0    0   0   0  0     0 non-Selected</span></a>
<a class="sourceLine" id="cb6-58" data-line-number="58"><span class="co">#&gt; 5: D7      1    0    0      1    0    0   0   0  0     1 non-Selected</span></a>
<a class="sourceLine" id="cb6-59" data-line-number="59"><span class="co">#&gt; 6: D8      1    0    0      0    0    1   0   1  0     0 non-Selected</span></a></code></pre></div>
</div>
</div>
<div id="iii--visualization" class="section level2">
<h2 class="hasAnchor">
<a href="#iii--visualization" class="anchor"></a>III. Visualization</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Bar chart of diagnostic categories â€“ case and control groups</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">selectedCaseFile &lt;-<span class="st"> </span><span class="kw">selectCases</span>(<span class="dt">dxDataFile =</span> sampleDxFile,</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">                                <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">                                <span class="dt">icdColName =</span> ICD,</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">                                <span class="dt">dateColName =</span> Date,</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">                                <span class="dt">icd10usingDate =</span> <span class="st">"2015/10/01"</span>,</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">                                <span class="dt">groupDataType =</span> ccs,</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">                                <span class="dt">caseCondition =</span> <span class="st">"11"</span>,</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">                                <span class="dt">isDescription =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">                                <span class="dt">caseCount =</span> <span class="dv">1</span>) </a>
<a class="sourceLine" id="cb7-11" data-line-number="11"></a>
<a class="sourceLine" id="cb7-12" data-line-number="12">groupedDataWide &lt;-<span class="st"> </span><span class="kw">groupedDataLongToWide</span>(<span class="dt">dxDataFile  =</span> ELIX<span class="op">$</span>groupedDT,</a>
<a class="sourceLine" id="cb7-13" data-line-number="13">                                         <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb7-14" data-line-number="14">                                         <span class="dt">categoryColName =</span> Comorbidity,</a>
<a class="sourceLine" id="cb7-15" data-line-number="15">                                         <span class="dt">dateColName =</span> Date,</a>
<a class="sourceLine" id="cb7-16" data-line-number="16">                                         <span class="dt">reDup =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb7-17" data-line-number="17">                                         <span class="dt">numericOrBinary =</span> B,</a>
<a class="sourceLine" id="cb7-18" data-line-number="18">                                         <span class="dt">count =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb7-19" data-line-number="19">                                         <span class="dt">selectedCaseFile =</span> selectedCaseFile)</a>
<a class="sourceLine" id="cb7-20" data-line-number="20"></a>
<a class="sourceLine" id="cb7-21" data-line-number="21">plot &lt;-<span class="st"> </span><span class="kw">plotDiagCat</span>(<span class="dt">groupedDataWide =</span> groupedDataWide,</a>
<a class="sourceLine" id="cb7-22" data-line-number="22">                    <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb7-23" data-line-number="23">                    <span class="dt">groupColName =</span> selectedCase,</a>
<a class="sourceLine" id="cb7-24" data-line-number="24">                    <span class="dt">topN =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb7-25" data-line-number="25">                    <span class="dt">limitFreq =</span> <span class="fl">0.01</span>,</a>
<a class="sourceLine" id="cb7-26" data-line-number="26">                    <span class="dt">pvalue =</span> <span class="fl">0.05</span>)</a>
<a class="sourceLine" id="cb7-27" data-line-number="27">plot<span class="op">$</span>graph </a></code></pre></div>
<p><img src="Supplement_files/figure-markdown_strict/unnamed-chunk-13-1.png"></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">plot<span class="op">$</span>sigCate</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt;    DiagnosticCategory        Group N Percentage</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; 1:              TUMOR non-Selected 1       3.03</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; 2:              TUMOR     Selected 4      80.00</span></a></code></pre></div>
</div>
<div id="iv--procedure" class="section level2">
<h2 class="hasAnchor">
<a href="#iv--procedure" class="anchor"></a>IV. Procedure</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">head</span>(samplePrFile)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt;    ID   ICD       Date</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; 1:  B  5681 2008-01-14</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt; 2:  A  9774 2009-01-11</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt; 3:  B 44.99 2009-05-10</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; 4:  C 07.59 2009-01-21</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; 5:  B  0205 2008-07-06</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; 6:  B  8812 2007-06-27</span></a></code></pre></div>
<div id="code-classification" class="section level3">
<h3 class="hasAnchor">
<a href="#code-classification" class="anchor"></a>1. Code classification</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># CCS single level classification</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">CCS &lt;-<span class="st"> </span><span class="kw">icdPrToCCS</span> (<span class="dt">prDataFile =</span> samplePrFile,</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">                   <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">                   <span class="dt">icdColName =</span> ICD, </a>
<a class="sourceLine" id="cb10-5" data-line-number="5">                   <span class="dt">dateColName =</span> Date,</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">                   <span class="dt">icd10usingDate =</span> <span class="st">"2015-10-01"</span>,</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">                   <span class="dt">isDescription =</span> <span class="ot">TRUE</span>) </a>
<a class="sourceLine" id="cb10-8" data-line-number="8"></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="kw">head</span>(CCS<span class="op">$</span>groupedDT)</a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt;    Short ID   ICD       Date</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt; 1:  5681  B  5681 2008-01-14</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt; 2:  9774  A  9774 2009-01-11</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt; 3:  4499  B 44.99 2009-05-10</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt; 4:  0759  C 07.59 2009-01-21</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#&gt; 5:  0205  B  0205 2008-07-06</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="co">#&gt; 6:  8812  B  8812 2007-06-27</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="co">#&gt;                              CCS_CATEGORY_DESCRIPTION</span></a>
<a class="sourceLine" id="cb10-18" data-line-number="18"><span class="co">#&gt; 1:   Other OR therapeutic procedures of urinary tract</span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19"><span class="co">#&gt; 2: Other non-OR therapeutic procedures; female organs</span></a>
<a class="sourceLine" id="cb10-20" data-line-number="20"><span class="co">#&gt; 3:           Other OR upper GI therapeutic procedures</span></a>
<a class="sourceLine" id="cb10-21" data-line-number="21"><span class="co">#&gt; 4:                   Therapeutic endocrine procedures</span></a>
<a class="sourceLine" id="cb10-22" data-line-number="22"><span class="co">#&gt; 5:     Other OR therapeutic nervous system procedures</span></a>
<a class="sourceLine" id="cb10-23" data-line-number="23"><span class="co">#&gt; 6:  Other diagnostic radiology and related techniques</span></a>
<a class="sourceLine" id="cb10-24" data-line-number="24"></a>
<a class="sourceLine" id="cb10-25" data-line-number="25"><span class="co"># ICD to CCS multiple level 1</span></a>
<a class="sourceLine" id="cb10-26" data-line-number="26">CCSlvl &lt;-<span class="st"> </span><span class="kw">icdPrToCCSLvl</span>(<span class="dt">prDataFile =</span> samplePrFile,</a>
<a class="sourceLine" id="cb10-27" data-line-number="27">                        <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb10-28" data-line-number="28">                        <span class="dt">icdColName =</span> ICD, </a>
<a class="sourceLine" id="cb10-29" data-line-number="29">                        <span class="dt">dateColName =</span> Date,</a>
<a class="sourceLine" id="cb10-30" data-line-number="30">                        <span class="dt">icd10usingDate =</span> <span class="st">"2015-10-01"</span>,</a>
<a class="sourceLine" id="cb10-31" data-line-number="31">                        <span class="dt">CCSLevel =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb10-32" data-line-number="32">                        <span class="dt">isDescription =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb10-33" data-line-number="33"></a>
<a class="sourceLine" id="cb10-34" data-line-number="34"><span class="kw">head</span>(CCSlvl<span class="op">$</span>groupedDT)</a>
<a class="sourceLine" id="cb10-35" data-line-number="35"><span class="co">#&gt;    Short ID   ICD       Date CCS_LVL_2</span></a>
<a class="sourceLine" id="cb10-36" data-line-number="36"><span class="co">#&gt; 1:  5681  B  5681 2008-01-14     10.11</span></a>
<a class="sourceLine" id="cb10-37" data-line-number="37"><span class="co">#&gt; 2:  9774  A  9774 2009-01-11     12.12</span></a>
<a class="sourceLine" id="cb10-38" data-line-number="38"><span class="co">#&gt; 3:  4499  B 44.99 2009-05-10      9.26</span></a>
<a class="sourceLine" id="cb10-39" data-line-number="39"><span class="co">#&gt; 4:  0759  C 07.59 2009-01-21       2.3</span></a>
<a class="sourceLine" id="cb10-40" data-line-number="40"><span class="co">#&gt; 5:  0205  B  0205 2008-07-06       1.9</span></a>
<a class="sourceLine" id="cb10-41" data-line-number="41"><span class="co">#&gt; 6:  8812  B  8812 2007-06-27     16.37</span></a>
<a class="sourceLine" id="cb10-42" data-line-number="42"></a>
<a class="sourceLine" id="cb10-43" data-line-number="43"><span class="co"># Procedure class</span></a>
<a class="sourceLine" id="cb10-44" data-line-number="44">ProcedureClass &lt;-<span class="st"> </span><span class="kw">icdPrToProcedureClass</span>(<span class="dt">prDataFile =</span> samplePrFile,</a>
<a class="sourceLine" id="cb10-45" data-line-number="45">                                        <span class="dt">idColName =</span> ID,</a>
<a class="sourceLine" id="cb10-46" data-line-number="46">                                        <span class="dt">icdColName =</span> ICD, </a>
<a class="sourceLine" id="cb10-47" data-line-number="47">                                        <span class="dt">dateColName =</span> Date, </a>
<a class="sourceLine" id="cb10-48" data-line-number="48">                                        <span class="dt">icd10usingDate =</span> <span class="st">"2015-10-01"</span>, </a>
<a class="sourceLine" id="cb10-49" data-line-number="49">                                        <span class="dt">isDescription =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb10-50" data-line-number="50"></a>
<a class="sourceLine" id="cb10-51" data-line-number="51"><span class="kw">head</span>(ProcedureClass<span class="op">$</span>groupedDT)</a>
<a class="sourceLine" id="cb10-52" data-line-number="52"><span class="co">#&gt;    Short ID   ICD       Date PROCEDURE_CLASS</span></a>
<a class="sourceLine" id="cb10-53" data-line-number="53"><span class="co">#&gt; 1:  5681  B  5681 2008-01-14               4</span></a>
<a class="sourceLine" id="cb10-54" data-line-number="54"><span class="co">#&gt; 2:  9774  A  9774 2009-01-11               2</span></a>
<a class="sourceLine" id="cb10-55" data-line-number="55"><span class="co">#&gt; 3:  4499  B 44.99 2009-05-10               4</span></a>
<a class="sourceLine" id="cb10-56" data-line-number="56"><span class="co">#&gt; 4:  0759  C 07.59 2009-01-21               4</span></a>
<a class="sourceLine" id="cb10-57" data-line-number="57"><span class="co">#&gt; 5:  0205  B  0205 2008-07-06               4</span></a>
<a class="sourceLine" id="cb10-58" data-line-number="58"><span class="co">#&gt; 6:  8812  B  8812 2007-06-27               1</span></a></code></pre></div>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>



      <footer>
      <div class="copyright">
  <p>Developed by Hsiang-Ju Chiu, Yi-Ju Tseng.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


