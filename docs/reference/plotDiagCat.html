<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Plot of diagnostic categories — plotDiagCat • dxpr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Plot of diagnostic categories — plotDiagCat"><meta property="og:description" content="Histogram plot of diagnostic categories"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dxpr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/DHLab-TSENG/dxpr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot of diagnostic categories</h1>
    <small class="dont-index">Source: <a href="https://github.com/DHLab-TSENG/dxpr/blob/HEAD/R/fun_emr.R" class="external-link"><code>R/fun_emr.R</code></a>, <a href="https://github.com/DHLab-TSENG/dxpr/blob/HEAD/R/plotDiagCat.R" class="external-link"><code>R/plotDiagCat.R</code></a></small>
    <div class="hidden name"><code>plotDiagCat.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Histogram plot of diagnostic categories</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">plotDiagCat</span><span class="op">(</span>
  <span class="va">groupedDataWide</span>,
  <span class="va">idColName</span>,
  groupColName <span class="op">=</span> <span class="cn">NULL</span>,
  topN <span class="op">=</span> <span class="fl">10</span>,
  limitFreq <span class="op">=</span> <span class="fl">0.01</span>,
  pvalue <span class="op">=</span> <span class="fl">0.05</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>groupedDataWide</dt>
<dd><p>Wide table of data frame (generated from <code><a href="groupedDataLongToWide.html">groupedDataLongToWide</a></code> function).</p></dd>
<dt>topN</dt>
<dd><p>Numeric. Default is 10 (Top 10; 10 most common wrong ICD).</p></dd>
<dt>limitFreq</dt>
<dd><p>Numeric. minimum frequency shown (frequency below this threshold will not be shown in plot). Default is 0.01. In other words, the threshold is 1 percent patient among total patients been diagnosed in the same diagnostic category.</p></dd>
<dt>pvalue</dt>
<dd><p>Numeric. p value of chisq.test. Default is 0.05.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A histogram plot and a <code>data.table</code> of summarized classified data.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function provides an overview of grouping category of the diagnostic code in histogram plot. User can observe the proportion of diagnostic categories in their dataset through this function.
Also, Chi-square test and Fisher’s exact test are also included in this function. User can test if the proportion of each diagnostic category in case group and control group are statistical significantly different.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other plot function: <code><a href="plotICDError.html">plotICDError</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># sample file for example</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sampleDxFile</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ID  ICD       Date Version</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:  A2 Z992 2020-05-22      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:  A5 Z992 2020-01-24      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:  A8 Z992 2015-10-27      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: A13 Z992 2020-04-26      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: A13 Z992 2025-02-02      10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: A15 Z992 2023-05-12      10</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Create a grouped data</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">ELIX</span> <span class="op">&lt;-</span> <span class="fu"><a href="dxComorbid.html">icdDxToComorbid</a></span><span class="op">(</span>dxDataFile <span class="op">=</span> <span class="va">sampleDxFile</span>,</span>
<span class="r-in">                       idColName <span class="op">=</span> <span class="va">ID</span>,</span>
<span class="r-in">                       icdColName <span class="op">=</span> <span class="va">ICD</span>,</span>
<span class="r-in">                       dateColName <span class="op">=</span> <span class="va">Date</span>,</span>
<span class="r-in">                       icd10usingDate <span class="op">=</span> <span class="st">"2015/10/01"</span>,</span>
<span class="r-in">                       comorbidMethod <span class="op">=</span> <span class="va">elix</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Wrong ICD format: total 9 ICD codes (the number of occurrences is in brackets)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> c("A0.11 (20)", "E114 (8)", "Z9.90 (6)", "F42 (6)", "001 (5)", "75.52 (4)", "755.2 (3)", "123.45 (3)", "7552 (2)")</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 	</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Wrong ICD version: total 7 ICD codes (the number of occurrences is in brackets)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> c("V27.0 (18)", "A01.05 (8)", "42761 (7)", "V24.1 (6)", "A0105 (5)", "E03.0 (4)", "650 (4)")</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 	</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The ICD mentioned above matches to "NA" due to the format or other issues.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>"Wrong ICD format" means the ICD has wrong format</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>"Wrong ICD version" means the ICD classify to wrong ICD version (cause the "icd10usingDate" or other issues)</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ELIX</span><span class="op">$</span><span class="va">groupedDT</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Short  ID  ICD       Date Comorbidity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:  Z992  A2 Z992 2020-05-22    RENLFAIL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:  Z992  A5 Z992 2020-01-24    RENLFAIL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:  Z992  A8 Z992 2015-10-27    RENLFAIL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:  Z992 A13 Z992 2020-04-26    RENLFAIL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:  Z992 A13 Z992 2025-02-02    RENLFAIL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:  Z992 A15 Z992 2023-05-12    RENLFAIL</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Convert long format of grouped data into wide binary format</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">groupedDataWide</span> <span class="op">&lt;-</span> <span class="fu"><a href="groupedDataLongToWide.html">groupedDataLongToWide</a></span><span class="op">(</span><span class="va">ELIX</span><span class="op">$</span><span class="va">groupedDT</span>,</span>
<span class="r-in">                                         idColName <span class="op">=</span> <span class="va">ID</span>,</span>
<span class="r-in">                                         categoryColName <span class="op">=</span> <span class="va">Comorbidity</span>,</span>
<span class="r-in">                                         dateColName <span class="op">=</span> <span class="va">Date</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># plot of top 10 common grouped categories and a list of the detail of grouped categories</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">plot1</span> <span class="op">&lt;-</span> <span class="fu">plotDiagCat</span><span class="op">(</span>groupedDataWide <span class="op">=</span> <span class="va">groupedDataWide</span>,</span>
<span class="r-in">                          idColName <span class="op">=</span> <span class="va">ID</span>,</span>
<span class="r-in">                          topN <span class="op">=</span> <span class="fl">10</span>,</span>
<span class="r-in">                          limitFreq <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span>
<span class="r-in"><span class="va">plot1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $graph</span>
<span class="r-plt img"><img src="plotDiagCat-1.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $sigCate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     DiagnosticCategory  N Percentage</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:           RENLFAIL 24      63.16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:              TUMOR  6      15.79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:               ARTH  5      13.16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:              LYMPH  4      10.53</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:              PSYCH  4      10.53</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:               DRUG  3       7.89</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:              NEURO  3       7.89</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:               PARA  2       5.26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:           PERIVASC  2       5.26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:              VALVE  2       5.26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Select case with "Diseases of the urinary system" by level 2 of CCS classification</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">selectedCaseFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="selectCases.html">selectCases</a></span><span class="op">(</span>dxDataFile <span class="op">=</span> <span class="va">sampleDxFile</span>,</span>
<span class="r-in">                                idColName <span class="op">=</span> <span class="va">ID</span>,</span>
<span class="r-in">                                icdColName <span class="op">=</span> <span class="va">ICD</span>,</span>
<span class="r-in">                                dateColName <span class="op">=</span> <span class="va">Date</span>,</span>
<span class="r-in">                                icdVerColName <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span class="r-in">                                icd10usingDate <span class="op">=</span> <span class="st">"2015/10/01"</span>,</span>
<span class="r-in">                                groupDataType <span class="op">=</span> <span class="va">ccslvl2</span>,</span>
<span class="r-in">                                caseCondition <span class="op">=</span> <span class="st">"Diseases of the urinary system"</span>,</span>
<span class="r-in">                                caseCount <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Wrong ICD format: total 9 ICD codes (the number of occurrences is in brackets)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> c("A0.11 (20)", "E114 (8)", "Z9.90 (6)", "F42 (6)", "001 (5)", "75.52 (4)", "755.2 (3)", "123.45 (3)", "7552 (2)")</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 	</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Wrong ICD version: total 7 ICD codes (the number of occurrences is in brackets)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> c("V27.0 (18)", "A01.05 (8)", "42761 (7)", "V24.1 (6)", "A0105 (5)", "E03.0 (4)", "650 (4)")</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 	</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The ICD mentioned above matches to "NA" due to the format or other issues.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>"Wrong ICD format" means the ICD has wrong format</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>"Wrong ICD version" means the ICD classify to wrong ICD version (cause the "icd10usingDate" or other issues)</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Convert the long format of grouped data into a wide binary format with selected case</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">groupedDataWide</span> <span class="op">&lt;-</span> <span class="fu"><a href="groupedDataLongToWide.html">groupedDataLongToWide</a></span><span class="op">(</span><span class="va">ELIX</span><span class="op">$</span><span class="va">groupedDT</span>,</span>
<span class="r-in">                                         idColName <span class="op">=</span> <span class="va">ID</span>,</span>
<span class="r-in">                                         categoryColName <span class="op">=</span> <span class="va">Comorbidity</span>,</span>
<span class="r-in">                                         dateColName <span class="op">=</span> <span class="va">Date</span>,</span>
<span class="r-in">                                         selectedCaseFile <span class="op">=</span> <span class="va">selectedCaseFile</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># plot of top 10 common grouped categories and a list of the detail of grouped categories</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">plot2</span> <span class="op">&lt;-</span> <span class="fu">plotDiagCat</span><span class="op">(</span>groupedDataWide <span class="op">=</span> <span class="va">groupedDataWide</span>,</span>
<span class="r-in">                          idColName <span class="op">=</span> <span class="va">ID</span>,</span>
<span class="r-in">                          topN <span class="op">=</span> <span class="fl">10</span>,</span>
<span class="r-in">                          limitFreq <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span class="r-in">                          pvalue <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span class="r-in">                          groupColName <span class="op">=</span> <span class="va">selectedCase</span><span class="op">)</span></span>
<span class="r-in"><span class="va">plot2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $graph</span>
<span class="r-plt img"><img src="plotDiagCat-2.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $sigCate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    DiagnosticCategory        Group  N Percentage</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           RENLFAIL non-Selected  0          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:           RENLFAIL     Selected 24        100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Hsiang-Ju Chiu, Yi-Ju Tseng, Chun-Ju Chen.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

