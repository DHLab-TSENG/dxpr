<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Data integration for data split — splitDataByDate • dxpr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Data integration for data split — splitDataByDate"><meta property="og:description" content="This function splits data by the date of the clinical event and shows the data recorded before or after the clinical event, and calculates the period between the record date and index date based on a self-defined window gap."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dxpr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/DHLab-TSENG/dxpr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Data integration for data split</h1>
    <small class="dont-index">Source: <a href="https://github.com/DHLab-TSENG/dxpr/blob/HEAD/R/fun_emr.R" class="external-link"><code>R/fun_emr.R</code></a>, <a href="https://github.com/DHLab-TSENG/dxpr/blob/HEAD/R/splitDataByDate.R" class="external-link"><code>R/splitDataByDate.R</code></a></small>
    <div class="hidden name"><code>splitDataByDate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function splits data by the date of the clinical event and shows the data recorded before or after the clinical event, and calculates the period between the record date and index date based on a self-defined window gap.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">splitDataByDate</span><span class="op">(</span>
  <span class="va">dxDataFile</span>,
  <span class="va">idColName</span>,
  <span class="va">icdColName</span>,
  <span class="va">dateColName</span>,
  <span class="va">indexDateFile</span>,
  gap <span class="op">=</span> <span class="fl">30</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dxDataFile</dt>
<dd><p>A data frame object of clinical diagnostic data with at least 3 columns: ID, ICD, and Date. As for date column, the data format should be YYYY/MM/DD or YYYY-MM-DD.</p></dd>
<dt>idColName</dt>
<dd><p>Column name of ID column in dxDataFile. Data type of this argumant should be string without quotation marks.</p></dd>
<dt>icdColName</dt>
<dd><p>Column name of ICD column in dxDataFile. Data type of this argumant should be string without quotation marks.</p></dd>
<dt>dateColName</dt>
<dd><p>Column name of date column in dxDataFile, and the type of date column should be a date format in R or a string format with date information in YYYY/MM/DD or YYYY-MM-DD. Data type of this argumant should be string without quotation marks.</p></dd>
<dt>indexDateFile</dt>
<dd><p>A data frame contained index dates for each patient in an observed period. The column names should be 'ID' and 'indexDate'.</p></dd>
<dt>gap</dt>
<dd><p>Gap length of the window. Default is <code>30</code> (data will be seperated every 30 days).</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A new <code>data.table</code> based on <code>dxDataFile</code> and classified by <code>indexDateFile</code> for each patient</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>In most condition, users need to extract data by a specific clinical event (e.g., first diagnosis dates of chronic diseases). Users can define a table of clinical index dates of each patient. The date can be generated by <code><a href="selectCases.html">selectCases</a></code> or first/last admission date by <code><a href="getEligiblePeriod.html">getEligiblePeriod</a></code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other data integration functions: <code><a href="selectCases.html">selectCases</a></code>, <code><a href="getEligiblePeriod.html">getEligiblePeriod</a></code>, <code><a href="getConditionEra.html">getConditionEra</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># sample file for example</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">SampleforCertainPatient</span> <span class="op">&lt;-</span> <span class="va">sampleDxFile</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"A0|B0|C0|D0"</span>,<span class="va">ID</span><span class="op">)</span>,<span class="op">]</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">SampleforCertainPatient</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ID   ICD       Date Version</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: A0  5855 2013-12-20       9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: A0 V4511 2012-04-05       9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: A0  V560 2010-03-28       9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: A0  5853 2010-10-29       9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: A0  5856 2009-07-25       9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: B0  N185 2021-07-16      10</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Defined index date of patient A0,B0,C0 and D0</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">indexDateTable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A0"</span>,<span class="st">"B0"</span>,<span class="st">"C0"</span>,<span class="st">"D0"</span><span class="op">)</span>,</span>
<span class="r-in">                             indexDate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-08-12"</span>, <span class="st">"2024-02-12"</span>,</span>
<span class="r-in">                                           <span class="st">"2015-12-05"</span>, <span class="st">"2017-01-29"</span><span class="op">)</span>,</span>
<span class="r-in">                             stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">indexDateTable</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ID  indexDate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 A0 2023-08-12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 B0 2024-02-12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 C0 2015-12-05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 D0 2017-01-29</span>
<span class="r-in"><span class="co"># Split data by index date for each patient</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">splitedData</span> <span class="op">&lt;-</span> <span class="fu">splitDataByDate</span><span class="op">(</span><span class="va">SampleforCertainPatient</span>, <span class="va">ID</span>, <span class="va">ICD</span>, <span class="va">Date</span>,</span>
<span class="r-in">                               indexDateFile <span class="op">=</span> <span class="va">indexDateTable</span>,</span>
<span class="r-in">                               gap <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span>
<span class="r-in"><span class="va">splitedData</span><span class="op">[</span><span class="fl">15</span><span class="op">:</span><span class="fl">19</span>,<span class="op">]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ID  ICD       Date  indexDate timeTag window</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: B0 N183 2023-08-28 2024-02-12       B      6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: B0  N19 2023-11-18 2024-02-12       B      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: B0  N19 2024-02-12 2024-02-12       A      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: C0 C671 2015-12-05 2015-12-05       A      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: C0 C048 2016-07-05 2015-12-05       A      8</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Yi-Ju Tseng, Hsiang-Ju Chiu, Chun-Ju Chen.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

